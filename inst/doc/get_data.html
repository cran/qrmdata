<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Marius Hofert" />

<meta name="date" content="2016-05-29" />

<title>Fetching the Datasets of qrmdata</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css;charset=utf-8,%0Abody%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20left%3B%20%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0A%7D%0Apre%20%7B%0Aoverflow%2Dx%3A%20auto%3B%20%0A%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20white%3B%20%0Aborder%3A%20%23CCCCCC%201px%20solid%3B%20%0A%7D%0A%0Apre%3Anot%28%5Bclass%5D%29%20code%20%7B%0Acolor%3A%20%23444%3B%0Abackground%2Dcolor%3A%20white%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Menlo%2C%20monospace%3B%20%0Afont%2Dsize%3A%2090%25%3B%20%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%20%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0A%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%20none%3B%20%0Amargin%3A%200%205px%3B%0Amax%2Dwidth%3A%20100%25%3B%20%0Atext%2Dalign%3A%20center%3B%20%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%20none%3B%20%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%20none%3B%20%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%20none%3B%20%0Amargin%2Dleft%3A%204px%3B%20%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%20none%3B%20%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">Fetching the Datasets of qrmdata</h1>
<h4 class="author"><em>Marius Hofert</em></h4>
<h4 class="date"><em>2016-05-29</em></h4>
</div>


<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(qrmtools)
<span class="kw">require</span>(xts)

end &lt;-<span class="st"> &quot;2015-12-31&quot;</span> <span class="co"># last trading day we consider</span></code></pre></div>
<div id="stock-data" class="section level2">
<h2>1 Stock data</h2>
<p>Note: The <code>.csv</code> files can be found in <code>./misc</code> in the packageâ€™s source directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Radioshack
## Defaulted early 2015 =&gt; Yahoo Finance only has
## https://www.google.com/finance/historical?q=OTCMKTS%3ARSHCQ&amp;ei=N_CAVvnUKsjjsAHJ3YvwDg
## but no adjusted close price (and values differ slightly)
## =&gt; Use the data from Yahoo Finance as of 2015-01-21 here (collected by Alex J. McNeil)
RSHCQ &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_RSHCQ.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">row.names=</span><span class="dv">1</span>) <span class="co"># get data</span>
dates &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">row.names</span>(RSHCQ), <span class="dt">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>) <span class="co"># get dates</span>
RSHCQ &lt;-<span class="st"> </span><span class="kw">xts</span>(RSHCQ, dates)[,<span class="st">&quot;Adj.Close&quot;</span>] <span class="co"># create an xts object</span>
<span class="kw">colnames</span>(RSHCQ) &lt;-<span class="st"> &quot;RSHCQ&quot;</span>
<span class="kw">save</span>(RSHCQ, <span class="dt">file=</span><span class="st">&quot;RSHCQ.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>
<div id="stock-index-data" class="section level2">
<h2>2 Stock index data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## S&amp;P 500
SP500 &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^GSPC&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(SP500, <span class="dt">file=</span><span class="st">&quot;SP500.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## Dow Jones
DJ &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^DJI&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(DJ, <span class="dt">file=</span><span class="st">&quot;DJ.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## NASDAQ 100
NASDAQ &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^NDX&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(NASDAQ, <span class="dt">file=</span><span class="st">&quot;NASDAQ.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## FTSE 100
FTSE &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^FTSE&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(FTSE, <span class="dt">file=</span><span class="st">&quot;FTSE.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## SMI (Swiss Market Index)
SMI &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^SSMI&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(SMI, <span class="dt">file=</span><span class="st">&quot;SMI.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## Euro Stoxx 50 (stock index of Eurozone stocks)
EURSTOXX &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^STOXX50E&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(EURSTOXX, <span class="dt">file=</span><span class="st">&quot;EURSTOXX.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CAC (Cotation Assistee en Continu)
CAC &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^FCHI&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(CAC, <span class="dt">file=</span><span class="st">&quot;CAC.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## DAX (Deutscher Aktienindex)
DAX &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^GDAXI&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(DAX, <span class="dt">file=</span><span class="st">&quot;DAX.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CSI (China Securities Index)
CSI &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;000300.SS&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(CSI, <span class="dt">file=</span><span class="st">&quot;CSI.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## HSI (Hang Seng Index; open to overseas investors)
HSI &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^HSI&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(HSI, <span class="dt">file=</span><span class="st">&quot;HSI.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## SSEC (Shanghai Stock Exchange Composite Index; restricted to domestic investors)
SSEC &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;000001.SS&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(SSEC, <span class="dt">file=</span><span class="st">&quot;SSEC.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## NIKKEI
NIKKEI &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^N225&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(NIKKEI, <span class="dt">file=</span><span class="st">&quot;NIKKEI.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>
<div id="constituents-data" class="section level2">
<h2>3 Constituents data</h2>
<div id="sp-500" class="section level3">
<h3>3.1 S&amp;P 500</h3>
<!-- Algorithm for S&P 500 (constituents not available on finance.yahoo.com):
     1) Copy the ticker table from https://www.cboe.com/products/snp500.aspx without header
     2) Paste it to a new document in LibreOffice
     3) Remove all columns except: Ticker, GICS, GICS subsectors
     4) Save it as a .csv file (when asked, make sure ',' is chosen as delimiter) -->
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## S&amp;P 500 constituents
## See https://www.cboe.com/products/snp500.aspx (updated 2015-10-12)
SP500_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_SP500_const_tab.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>)
<span class="kw">colnames</span>(SP500_const_info) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Ticker&quot;</span>, <span class="st">&quot;Sector&quot;</span>, <span class="st">&quot;Subsector&quot;</span>)
SP500_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(SP500_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end) <span class="co"># get data for these tickers (takes a while)</span>
SP500_const &lt;-<span class="st"> </span><span class="kw">round</span>(SP500_const, <span class="dt">digits =</span> <span class="dv">2</span>) <span class="co"># round to fit in a single R package</span>
<span class="kw">save</span>(SP500_const, SP500_const_info, <span class="dt">file=</span><span class="st">&quot;SP500_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

if(<span class="ot">FALSE</span>) {
    <span class="kw">image</span>(<span class="dt">x=</span><span class="kw">index</span>(SP500_const), <span class="dt">y=</span><span class="kw">seq_len</span>(<span class="kw">ncol</span>(SP500_const)), <span class="dt">z=</span><span class="kw">is.na</span>(SP500_const),
          <span class="dt">col=</span><span class="kw">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;black&quot;</span>), <span class="dt">xlab=</span><span class="st">&quot;Time t&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Stock j&quot;</span>,
          <span class="dt">main=</span><span class="st">&quot;Plot of NAs among the S&amp;P 500 constituents&quot;</span>)
    <span class="kw">mtext</span>(<span class="st">&quot;Black: NA; White: Data available&quot;</span>, <span class="dt">side=</span><span class="dv">4</span>, <span class="dt">line=</span><span class="dv">1</span>, <span class="dt">adj=</span><span class="dv">0</span>)
}</code></pre></div>
</div>
<div id="other-indexes" class="section level3">
<h3>3.2 Other indexes</h3>
<!-- Algorithm for all but S&P 500:
     1) Go to finance.yahoo.com -> ^DJI -> Components
     2) Download the table to a .csv file (by copy-paste)
     3) Remove everything but the first column (containing the tickers); keep the last line break -->
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Dow Jones constituents
## See https://finance.yahoo.com/q/cp?s=%5EDJI (drawn on 2015-12-10)
DJ_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_DJ_const_tab.csv&quot;</span>)
<span class="kw">colnames</span>(DJ_const_info) &lt;-<span class="st"> &quot;Ticker&quot;</span>
DJ_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(DJ_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end)
<span class="kw">save</span>(DJ_const, <span class="dt">file=</span><span class="st">&quot;DJ_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>) <span class="co"># Note: No info besides tickers available =&gt; don't save *_const_info</span>

## FTSE 100 constituents
## See https://uk.finance.yahoo.com/q/cp?s=%5EFTSE (drawn on 2015-12-10)
## Note: ncol(FTSE_const)=98 only
FTSE_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_FTSE_const_tab.csv&quot;</span>)
<span class="kw">colnames</span>(FTSE_const_info) &lt;-<span class="st"> &quot;Ticker&quot;</span>
FTSE_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(FTSE_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end)
<span class="kw">save</span>(FTSE_const, <span class="dt">file=</span><span class="st">&quot;FTSE_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>) <span class="co"># Note: No info besides tickers available =&gt; don't save *_const_info</span>

## SMI constituents
## See https://uk.finance.yahoo.com/q/cp?s=%5ESSMI (drawn on 2015-12-10)
## Note: 6/20 stocks missing
if(<span class="ot">FALSE</span>) {
    SMI_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_SMI_const_tab.csv&quot;</span>)
    <span class="kw">colnames</span>(SMI_const_info) &lt;-<span class="st"> &quot;Ticker&quot;</span>
    SMI_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(SMI_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end)
    <span class="kw">save</span>(SMI_const, <span class="dt">file=</span><span class="st">&quot;SMI_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>) <span class="co"># Note: No info besides tickers available =&gt; don't save *_const_info</span>
}

## Euro Stoxx 50 constituents
## See https://uk.finance.yahoo.com/q/cp?s=%5ESTOXX50E (drawn on 2015-12-10)
## Note: 2 stocks missing
EURSTX_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_EURSTX_const_tab.csv&quot;</span>)
<span class="kw">colnames</span>(EURSTX_const_info) &lt;-<span class="st"> &quot;Ticker&quot;</span>
EURSTX_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(EURSTX_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end)
<span class="kw">save</span>(EURSTX_const, <span class="dt">file=</span><span class="st">&quot;EURSTX_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>) <span class="co"># Note: No info besides tickers available =&gt; don't save *_const_info</span>

## HSI constituents
## See https://uk.finance.yahoo.com/q/cp?s=%5EHSI (drawn on 2015-12-10)
HSI_const_info &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data_HSI_const_tab.csv&quot;</span>)
<span class="kw">colnames</span>(HSI_const_info) &lt;-<span class="st"> &quot;Ticker&quot;</span>
HSI_const &lt;-<span class="st"> </span><span class="kw">get_data</span>(HSI_const_info[,<span class="dv">1</span>], <span class="dt">to=</span>end)
<span class="kw">save</span>(HSI_const, <span class="dt">file=</span><span class="st">&quot;HSI_const.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>) <span class="co"># Note: No info besides tickers available =&gt; don't save *_const_info</span>

## Note: NIKKEI constituents not available</code></pre></div>
</div>
</div>
<div id="fx-data" class="section level2">
<h2>4 FX data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Check that 1/&quot;1 unit cur A in cur B&quot; ~= &quot;cur B in cur A&quot;
if(<span class="ot">FALSE</span>) {
    GBP_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;GBP/USD&quot;</span>, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>) <span class="co"># 1 GBP in USD</span>
    USD_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;USD/GBP&quot;</span>, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>) <span class="co"># 1 USD in GBP</span>
    ## Check that 1/GBP_USD ~= USD_GBP
    <span class="kw">plot</span>(USD_GBP)
    <span class="kw">lines</span>(<span class="dv">1</span>/GBP_USD, <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)
    <span class="kw">summary</span>(USD_GBP<span class="dv">-1</span>/GBP_USD) <span class="co"># as good as equal</span>
}

## Choose a reasonable 'from' date
## FX involving EUR are only available &gt;= 1998-12-14
from &lt;-<span class="st"> &quot;2000-01-01&quot;</span></code></pre></div>
<div id="usd" class="section level3">
<h3>4.1 */USD</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## CAD/USD
CAD_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CAD/USD&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CAD_USD)
<span class="kw">save</span>(CAD_USD, <span class="dt">file=</span><span class="st">&quot;CAD_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## GBP/USD
GBP_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;GBP/USD&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(GBP_USD)
<span class="kw">save</span>(GBP_USD, <span class="dt">file=</span><span class="st">&quot;GBP_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## EUR/USD
EUR_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;EUR/USD&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(EUR_USD)
<span class="kw">save</span>(EUR_USD, <span class="dt">file=</span><span class="st">&quot;EUR_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CHF/USD
CHF_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CHF/USD&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CHF_USD)
<span class="kw">save</span>(CHF_USD, <span class="dt">file=</span><span class="st">&quot;CHF_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## JPY/USD
## Note: We use JPY/USD = 1/(USD/JPY) here since JPY/USD only
##       has four digits which is to little here
JPY_USD &lt;-<span class="st"> </span><span class="dv">1</span>/<span class="kw">get_data</span>(<span class="st">&quot;USD/JPY&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(JPY_USD)
<span class="kw">save</span>(JPY_USD, <span class="dt">file=</span><span class="st">&quot;JPY_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CNY/USD
CNY_USD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CNY/USD&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CNY_USD)
<span class="kw">save</span>(CNY_USD, <span class="dt">file=</span><span class="st">&quot;CNY_USD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>
<div id="gbp" class="section level3">
<h3>4.2 */GBP</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## CAD/GBP
CAD_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CAD/GBP&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CAD_GBP)
<span class="kw">save</span>(CAD_GBP, <span class="dt">file=</span><span class="st">&quot;CAD_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## GBP/GBP
USD_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;USD/GBP&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(USD_GBP)
<span class="kw">save</span>(USD_GBP, <span class="dt">file=</span><span class="st">&quot;USD_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## EUR/GBP
EUR_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;EUR/GBP&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(EUR_GBP)
<span class="kw">save</span>(EUR_GBP, <span class="dt">file=</span><span class="st">&quot;EUR_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CHF/GBP
CHF_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CHF/GBP&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CHF_GBP)
<span class="kw">save</span>(CHF_GBP, <span class="dt">file=</span><span class="st">&quot;CHF_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## JPY/GBP
## Note: We use JPY/GBP = 1/(GBP/JPY) here since JPY/GBP only
##       has four digits which is to little here
JPY_GBP &lt;-<span class="st"> </span><span class="dv">1</span>/<span class="kw">get_data</span>(<span class="st">&quot;GBP/JPY&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(JPY_GBP)
<span class="kw">save</span>(JPY_GBP, <span class="dt">file=</span><span class="st">&quot;JPY_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## CNY/GBP
CNY_GBP &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;CNY/GBP&quot;</span>, <span class="dt">from=</span>from, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;oanda&quot;</span>)
<span class="kw">head</span>(CNY_GBP)
<span class="kw">save</span>(CNY_GBP, <span class="dt">file=</span><span class="st">&quot;CNY_GBP.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>
</div>
<div id="interest-rate-data" class="section level2">
<h2>5 Interest rate data</h2>
<div id="canada" class="section level3">
<h3>5.1 Canada</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Get data from http://www.bankofcanada.ca/rates/interest-rates/bond-yield-curves/
ZCB_CA &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data_yield_curves_CA.csv&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">na.strings=</span><span class="st">&quot; na&quot;</span>, <span class="dt">row.names=</span><span class="dv">1</span>)
<span class="kw">head</span>(ZCB_CA) <span class="co"># quick look</span>
ZCB_CA &lt;-<span class="st"> </span>ZCB_CA[,-<span class="kw">ncol</span>(ZCB_CA)] <span class="co"># remove last (empty) column</span>
## Pick out rows with *all* available data only
ZCB_CA &lt;-<span class="st"> </span>ZCB_CA[<span class="kw">apply</span>(!<span class="kw">is.na</span>(ZCB_CA), <span class="dv">1</span>, all),]
## Create Date object
dates &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">row.names</span>(ZCB_CA), <span class="dt">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>)
## Create xts object
ZCB_CA &lt;-<span class="st"> </span><span class="kw">xts</span>(ZCB_CA, dates)
## Fix column names
clnms &lt;-<span class="st"> </span><span class="kw">colnames</span>(ZCB_CA)
clnms &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;YR&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="kw">gsub</span>(<span class="st">&quot;ZC&quot;</span>, <span class="st">&quot;&quot;</span>, clnms)) <span class="co"># remove leading and trailing characters</span>
clnms &lt;-<span class="st"> </span><span class="kw">sapply</span>(clnms, function(x) { <span class="co"># insert &quot;.&quot;</span>
    if(<span class="kw">nchar</span>(x) ==<span class="st"> </span><span class="dv">4</span>) { <span class="co"># insert &quot;.&quot; after first char</span>
        <span class="kw">gsub</span>(<span class="st">'^(.{1})(.*)$'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">1.</span><span class="ch">\\</span><span class="st">2'</span>, x)
    } else { <span class="co"># insert &quot;.&quot; after first char</span>
        <span class="kw">gsub</span>(<span class="st">'^(.{2})(.*)$'</span>, <span class="st">'</span><span class="ch">\\</span><span class="st">1.</span><span class="ch">\\</span><span class="st">2'</span>, x)
    }
})
<span class="kw">colnames</span>(ZCB_CA) &lt;-<span class="st"> </span>clnms
<span class="kw">head</span>(ZCB_CA)
## Save
<span class="kw">save</span>(ZCB_CA, <span class="dt">file=</span><span class="st">&quot;ZCB_CA.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## Plot
if(<span class="ot">FALSE</span>)
    <span class="kw">plot.zoo</span>(ZCB_CA, <span class="dt">screens=</span><span class="dv">1</span>, <span class="dt">col=</span><span class="kw">adjustcolor</span>(<span class="st">&quot;black&quot;</span>, <span class="dt">alpha.f=</span><span class="fl">0.05</span>))</code></pre></div>
</div>
<div id="us" class="section level3">
<h3>5.2 US</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Get data from https://www.quandl.com/data/FED/SVENY-US-Treasury-Zero-Coupon-Yield-Curve
ZCB_US &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;FED/SVENY&quot;</span>, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;quandl&quot;</span>)
<span class="kw">head</span>(ZCB_US) <span class="co"># quick look</span>
## Pick out rows with *all* available data only
ZCB_US &lt;-<span class="st"> </span>ZCB_US[<span class="kw">apply</span>(!<span class="kw">is.na</span>(ZCB_US), <span class="dv">1</span>, all),]
## Fix column names
clnms &lt;-<span class="st"> </span><span class="kw">colnames</span>(ZCB_US)
clnms &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">gsub</span>(<span class="st">&quot;SVENY&quot;</span>, <span class="st">&quot;&quot;</span>, clnms),<span class="st">&quot;y&quot;</span>) <span class="co"># remove leading characters and append &quot;y&quot;</span>
clnms[<span class="dv">1</span>:<span class="dv">9</span>] &lt;-<span class="st"> </span><span class="kw">substr</span>(clnms[<span class="dv">1</span>:<span class="dv">9</span>], <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># remove leading &quot;0&quot;</span>
<span class="kw">colnames</span>(ZCB_US) &lt;-<span class="st"> </span>clnms
<span class="kw">head</span>(ZCB_US)
## Save
<span class="kw">save</span>(ZCB_US, <span class="dt">file=</span><span class="st">&quot;ZCB_US.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## Plot
if(<span class="ot">FALSE</span>)
    <span class="kw">plot.zoo</span>(ZCB_US, <span class="dt">screens=</span><span class="dv">1</span>, <span class="dt">col=</span><span class="kw">adjustcolor</span>(<span class="st">&quot;black&quot;</span>, <span class="dt">alpha.f=</span><span class="fl">0.05</span>))</code></pre></div>
</div>
</div>
<div id="volatility-data" class="section level2">
<h2>6 Volatility data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## VIX
VIX &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;^VIX&quot;</span>, <span class="dt">to=</span>end)
<span class="kw">save</span>(VIX, <span class="dt">file=</span><span class="st">&quot;VIX.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>
<div id="commodity-data" class="section level2">
<h2>7 Commodity data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Oil
## Note: - Brent Crude is the benchmark (https://en.wikipedia.org/wiki/Brent_Crude)
##       - See https://www.quandl.com/data/FRED?keyword=dcoil for the tickers
##         =&gt; https://www.quandl.com/data/FRED/DCOILBRENTEU-Crude-Oil-Prices-Brent-Europe
##       - FRED = Federal Reserve Economic Data =&gt; FRED data can also be directly
##         obtained via getSymbols (and thus get_data).
##       - get_data(&quot;DCOILBRENTEU&quot;, to=end, src=&quot;FRED&quot;) would have also worked
OIL_Brent &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;FRED/DCOILBRENTEU&quot;</span>, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;quandl&quot;</span>) <span class="co"># Brent Crude price in USD per barrel (USD/bbl)</span>
<span class="kw">colnames</span>(OIL_Brent) &lt;-<span class="st"> &quot;OIL_Brent&quot;</span>
<span class="kw">stopifnot</span>(!<span class="kw">is.na</span>(OIL_Brent))
<span class="kw">save</span>(OIL_Brent, <span class="dt">file=</span><span class="st">&quot;OIL_Brent.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)

## Gold
## See https://www.quandl.com/data/WGC/GOLD_DAILY_USD-Gold-Prices-Daily-Currency-USD (WGC = World Gold Council)
GOLD &lt;-<span class="st"> </span><span class="kw">get_data</span>(<span class="st">&quot;WGC/GOLD_DAILY_USD&quot;</span>, <span class="dt">to=</span>end, <span class="dt">src=</span><span class="st">&quot;quandl&quot;</span>)
<span class="kw">colnames</span>(GOLD) &lt;-<span class="st"> &quot;GOLD&quot;</span>
<span class="kw">stopifnot</span>(!<span class="kw">is.na</span>(GOLD))
<span class="kw">save</span>(GOLD, <span class="dt">file=</span><span class="st">&quot;GOLD.rda&quot;</span>, <span class="dt">compress=</span><span class="st">&quot;xz&quot;</span>)</code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
